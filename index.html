<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mustang GT (2019 FN) - Supercharger & Tuning Build Log</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<style>:root{--bg1:#f5f7fb;--bg2:#ffffff;--ink:#0f172a;--muted:#475569;--accent:#4f46e5;--border:#e2e8f0;--success:#10b981;--warning:#f59e0b;--danger:#ef4444}*{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,'Segoe UI',Roboto,Ubuntu,Cantarell,sans-serif;color:var(--ink);background:linear-gradient(135deg,#f5f7fb 0%,#e2e8f0 100%);min-height:100vh}.container{max-width:1200px;margin:0 auto;padding:24px}h1{margin:0 0 8px 0;font-size:28px;background:linear-gradient(135deg,#1e293b,#4f46e5);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}h2{margin:0 0 12px 0;font-size:22px;color:var(--accent)}h3{margin:16px 0 8px;font-size:16px;color:#374151}h4{margin:0;font-size:14px}.card{background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1)}.btn{border:1px solid var(--border);background:#fff;border-radius:8px;padding:8px 16px;cursor:pointer;font-size:14px;transition:all 0.2s;font-weight:500}.btn:hover{background:#f8fafc;transform:translateY(-1px)}.btn.primary{background:linear-gradient(135deg,var(--accent),#6366f1);border-color:var(--accent);color:#fff}.btn.primary:hover{background:linear-gradient(135deg,#3730a3,#4338ca)}.nav{display:flex;gap:4px;margin-bottom:24px;background:rgba(255,255,255,0.7);border-radius:12px;padding:6px;flex-wrap:wrap}.nav-tab{padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.2s;font-size:14px;color:var(--muted)}.nav-tab.active{background:var(--accent);color:#fff;box-shadow:0 2px 4px rgba(79,70,229,0.3)}.nav-tab:hover:not(.active){background:rgba(255,255,255,0.8)}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:20px 0}.stat{background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(248,250,252,0.9));border:1px solid var(--border);border-radius:12px;padding:20px;text-align:center;transition:transform 0.2s}.stat:hover{transform:translateY(-2px)}.stat-value{font-size:24px;font-weight:bold;color:var(--accent);margin-bottom:4px}.stat-label{color:var(--muted);font-size:14px}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0}table{width:100%;border-collapse:collapse;margin:20px 0;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,0.1)}th,td{padding:12px;text-align:left;border-bottom:1px solid var(--border)}th{background:#f8fafc;font-weight:600;color:#374151}tr:hover{background:#f8fafc}.timeline{margin:20px 0}.timeline-item{background:rgba(255,255,255,0.9);border-left:4px solid var(--accent);padding:16px;margin:12px 0;border-radius:0 8px 8px 0;box-shadow:0 2px 4px rgba(0,0,0,0.05);transition:all 0.2s}.timeline-item:hover{transform:translateX(4px);box-shadow:0 4px 8px rgba(0,0,0,0.1)}.timeline-date{font-weight:bold;color:var(--accent);margin-bottom:8px}.photo-container{cursor:pointer;transition:all 0.3s ease}.photo-toggle{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.photo-content{overflow:hidden;transition:all 0.3s ease}.photo-upload{border:2px dashed var(--border);border-radius:8px;padding:40px;text-align:center;color:var(--muted);transition:all 0.2s}.photo-upload:hover{border-color:var(--accent);color:var(--accent)}.car-image{width:100%;max-height:400px;object-fit:cover;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}.collapsible{cursor:pointer;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding:8px 0}.collapsible:hover{color:var(--accent)}.collapse-content{overflow:hidden;transition:all 0.3s ease}.collapsed{max-height:0;opacity:0;margin:0;padding:0}.expanded{max-height:none;opacity:1}.planned-category{margin:20px 0}.planned-item{background:#fff3cd;border:1px solid #ffeaa7;padding:15px;margin:10px 0;border-radius:8px}.planned-cost{color:#e17055;font-weight:bold;font-size:16px}.service-table{width:100%;border-collapse:collapse;margin:20px 0;font-size:14px}.service-table th{background:#4f46e5;color:#fff;padding:12px 8px;text-align:left;font-weight:600}.service-table td{padding:10px 8px;border-bottom:1px solid var(--border);vertical-align:top}.service-table tr:nth-child(even){background:#f8fafc}.service-table tr:hover{background:#e2e8f0}.action-btn{background:none;border:none;color:#6366f1;cursor:pointer;margin:0 4px;padding:4px 8px;border-radius:4px;font-size:12px}.action-btn:hover{background:#e2e8f0}.action-btn.delete{color:#ef4444}.action-btn.delete:hover{background:#fee2e2}.add-record-btn{background:#4f46e5;color:#fff;border:none;padding:8px 16px;border-radius:8px;cursor:pointer;float:right;margin-bottom:16px}.add-record-btn:hover{background:#3730a3}.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.5)}.modal.show{display:flex;align-items:center;justify-content:center}.modal-content{background:#fff;border-radius:16px;padding:24px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-close{background:none;border:none;font-size:24px;cursor:pointer;color:#6b7280}.form-group{margin-bottom:16px}.form-group label{display:block;margin-bottom:4px;font-weight:500;color:#374151}.form-group input,.form-group textarea,.form-group select{width:100%;padding:8px 12px;border:1px solid var(--border);border-radius:6px}.form-group textarea{min-height:80px;resize:vertical}.form-actions{display:flex;gap:12px;justify-content:flex-end;margin-top:24px}@media(max-width:768px){.container{padding:16px}.nav{flex-direction:column}.stats{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}h1{font-size:24px}.photo-upload{padding:20px}}</style>
</head>
<body>
<div class="container">
<h1>üèÅ Mustang GT (2019 FN) - Supercharger & Tuning Build Log</h1>
<p style="margin:0 0 24px 0;color:var(--muted)"><strong>Owner:</strong> Chris Cato | <strong>VIN:</strong> 1FA6P8NF2J5147111</p>
<nav class="nav">
<div class="nav-tab active" onclick="showTab('overview')">Overview</div>
<div class="nav-tab" onclick="showTab('vehicle')">Vehicle</div>
<div class="nav-tab" onclick="showTab('modifications')">Modifications</div>
<div class="nav-tab" onclick="showTab('service')">Service</div>
<div class="nav-tab" onclick="showTab('dyno')">Dyno</div>
<div class="nav-tab" onclick="showTab('workorders')">Work Orders</div>
<div class="nav-tab" onclick="showTab('planned')">Planned</div>
<div class="nav-tab" onclick="showTab('graphs')">Graphs</div>
<div class="nav-tab" onclick="showTab('technical')">Technical</div>
<div class="nav-tab" onclick="showTab('costs')">Costs</div>
<div class="nav-tab" onclick="showTab('media')">Media</div>
</nav>
<div id="content"></div>
<div id="service-modal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h2 id="modal-title">Add New Service Record</h2>
<button class="modal-close" onclick="closeServiceModal()">√ó</button>
</div>
<form id="service-form">
<div class="form-group"><label for="service-date">Date</label><input type="date" id="service-date" name="date" required></div>
<div class="form-group"><label for="service-odometer">Odometer (km)</label><input type="text" id="service-odometer" name="odometer"></div>
<div class="form-group"><label for="service-service">Service / Upgrade</label><input type="text" id="service-service" name="service" required></div>
<div class="form-group"><label for="service-supplier">Supplier / Workshop</label><input type="text" id="service-supplier" name="supplier" required></div>
<div class="form-group"><label for="service-notes">Notes / Parts Used</label><textarea id="service-notes" name="notes"></textarea></div>
<div class="form-group"><label for="service-cost">Cost (AUD)</label><input type="text" id="service-cost" name="cost"></div>
<div class="form-actions">
<button type="button" class="btn" onclick="closeServiceModal()">Cancel</button>
<button type="button" class="btn primary" onclick="saveServiceRecord()">Save Record</button>
</div>
</form>
</div>
</div>
</div>
<script src="mustang-build-data.js"></script>
<script>
// This file contains all the build data and rendering logic
// Data structure
var currentTab='overview',photoCollapsed=true,currentCarImage=null,editingServiceId=null;
var workOrderStates={fueling:{aem:false,kpm:false,injectors:false},wheels:{tyres:false,alignment:false}};
var sectionStates={workorders:{fueling:false,wheels:false},dyno:{results:false,goals:false,target:false,template:false,session1:false,session2:false},modifications:{induction:false,exhaust:false,engine:false,electronics:false},planned:{priority1:false,priority2:false},technical:{pulley:false,injector:false}};

// Complete build data from v1
var buildData={vehicle:{vin:'1FA6P8NF2J5147111',model:'2018 Build / 2019 FN Mustang GT',body:'Coupe - Fastback 2DR GT 5.0L V8 Manual',paint:'Magnetic (Paint Code: J7)',trim:'Magnetic / Leather Seat Trim',engine:'5.0L V8 Coyote (Gen 3)',engineNumber:'J5147111',displacement:'4951cc',compression:'12.0:1 (Stock) / 10.5:1 (Current)',valvetrain:'DOHC, Ti-VCT (Twin Independent Variable Cam Timing)',transmission:'6-Speed Manual (MT82)',drive:'2 Wheel Rear Drive',axle:'3.55',fuel:'Gasoline',fuelCapacity:'61 Litres',stockPower:'339kW @ 7,000 rpm',stockTorque:'556 Nm @ 4,600 rpm',currentPower:'473.2 kW @ 7,245 rpm',currentTorque:'722 Nm @ 5,520 rpm',weight:'1,727 kg (kerb)',powerToWeight:'274 kW/tonne (current)',length:'4,784 mm',width:'1,916 mm',height:'1,391 mm',wheelbase:'2,720 mm',trackFront:'1,632 mm',trackRear:'1,635 mm',wheelsFront:'19" x 9.0" Premium Cast Aluminum',wheelsRear:'19" x 9.5" Premium Cast Aluminum',tyresFront:'255/40 ZR19',tyresRear:'275/40 ZR19',buildDate:'26-February-2018',dealer:'Jefferson Ford, Mentone VIC',salesperson:'Aldo Canale',originalPrice:'$57,764',deliveryDate:'March 2018',options:['Performance Package','MagneRide Damping System','Brembo 6-Piston Front Brakes','Heavy Duty Front Springs','Larger Rear Stabilizer Bar','Strut Tower Brace','Leather Appointed Seats','SYNC 3 with 8" Touchscreen']},dynoResults:[{date:'02-Apr-2020',shop:'Herrod Performance',power:'441.2 kW @ 6,922 rpm',torque:'666 Nm @ 5,148 rpm',setup:'Whipple Gen 5 3.0L SC (initial install, stock exhaust)',testId:'4223.2',operator:'Rob Herrod',odometer:'49,000 km',fuel:'98 RON',correction:'4.43 SAE J607 (19.5¬∞C, 959 mBar, 74% RH)',gear:'4th',notes:'First dyno after supercharger installation.'},{date:'31-Jul-2020',shop:'Herrod Performance',power:'473.2 kW @ 7,245 rpm',torque:'722 Nm @ 5,520 rpm',setup:'Whipple Gen 5 3.0L SC + KOOKS 1 7/8" headers & Green Cats, custom tune',testId:'4608.2',operator:'Chris (Herrod)',odometer:'58,188 km',fuel:'Shell V-Power 98 RON',correction:'0.10 SAE J607 (11.8¬∞C, 1016 mBar, 66% RH)',gear:'4th',notes:'Headers/cats fitted; tune refined.'}],modifications:[{date:'February 2020',category:'Induction',name:'Whipple Supercharger Kit (Gen 5 3.0L)',description:'Installed at Herrod Performance. Complete package with Crusher induction system.',cost:'$30,955'},{date:'July 2020',category:'Exhaust',name:'KOOKS Headers & Green Cats',description:'1 7/8" x 3" Stainless Steel Headers with custom dyno tune.',cost:'$6,000'},{date:'November 2022',category:'Engine',name:'Full Engine Rebuild',description:'JE Forged Pistons (10.5:1 CR), K1 Forged Rods, ARP Head Studs, Cometic MLS Head Gaskets, King Racing Bearings, complete machine work and assembly.',cost:'$24,536'},{date:'August 2025',category:'Electronics',name:'SCT BDX Performance Programmer',description:'Handheld tuning device for monitoring and adjustments.',cost:'$760'}],plannedMods:[{category:'Priority 1: Fueling & Monitoring (2025-09)',items:[{name:'AEM X-Series Wideband UEGO + Vent Pod',description:'Essential for monitoring air-fuel ratios and ensuring safe tune parameters.',cost:'$500 - $600'},{name:'KPM Mustang GT 1500 hp in-tank fuel module',description:'High-flow in-tank fuel system designed for 1500+ horsepower applications.',cost:'$2,550'},{name:'Injector upgrade (ID1050X or FIC 1200cc)',description:'Larger injectors required to support increased boost levels.',cost:'$1,800 - $2,200'}]},{category:'Priority 2: Wheels & Tyres (2025-10)',items:[{name:'Tyre Replacement - Michelin Pilot Sport S',description:'275/35 ZR20 front, 305/30 ZR20 rear. High-performance summer tyres.',cost:'$1,200 - $1,500'},{name:'Wheel Alignment (Fulcrum Suspensions)',description:'Professional alignment setup for track use.',cost:'$200 - $300'}]}],serviceRecords:[{id:1,date:'2018-08-24',odometer:'0',service:'Initial Delivery Service',supplier:'Jefferson Ford (Mentone)',notes:'Factory inspection, fluids',cost:'Included'},{id:2,date:'2020-01-08',odometer:'~40,000',service:'Scheduled Service',supplier:'Westpoint Ford (Melton)',notes:'Oil, filter, fluids, inspection',cost:'$600.00'},{id:3,date:'2020-04-02',odometer:'~49,000',service:'Whipple Supercharger Install + Active Exhaust + Handling Pack + Driveshaft + Wheels/Tyres',supplier:'Herrod Performance',notes:'Whipple Gen 5 3.0L kit, Crusher induction, CF driveshaft, active exhaust, suspension & wheel/tyre package. First dyno: 441.2 kW',cost:'$30,955.00'},{id:4,date:'2020-07-21',odometer:'~58,000',service:'Headers + Dyno Tune',supplier:'Herrod Performance',notes:'KOOKS 1 7/8" headers w/ Green Cats, dyno tune',cost:'$6,000.00'},{id:5,date:'2021-01-27',odometer:'~70,000',service:'Track Prep Service',supplier:'Herrod Performance',notes:'Oil, filter, inspection, systems check (pre-Sandown track)',cost:'$500.00'},{id:6,date:'2021-11-16',odometer:'~78,000',service:'Track Prep Service',supplier:'Herrod Performance',notes:'Oil, filter, fluids, brakes, driveline check (track prep)',cost:'$600.00'},{id:7,date:'2021-05-10',odometer:'80,000',service:'Major Service',supplier:'Herrod Performance',notes:'Oil, filter, fluids, inspection, driveline check',cost:'$800.00'},{id:8,date:'2022-06-14',odometer:'97,000',service:'Major Service',supplier:'Herrod Performance',notes:'Oil, filter, fluids, full inspection',cost:'$800.00'},{id:9,date:'2022-11-16',odometer:'99,258',service:'Full Engine Rebuild',supplier:'Herrod Performance',notes:'JE pistons, K1 rods, ARP studs, billet gears, gaskets, clutch, machining, plugs',cost:'$24,535.90'},{id:10,date:'2022-11-16',odometer:'99,258',service:'Spark Plug Replacement',supplier:'Herrod Performance',notes:'Motorcraft CYFS-12-YP (installed with rebuild)',cost:'Included'},{id:11,date:'2025-08-25',odometer:'-',service:'SCT BDX Performance Programmer',supplier:'Herrod Performance',notes:'Handheld tuner purchased & setup',cost:'$760.00'},{id:12,date:'2025-08-31',odometer:'- (planned)',service:'Engine Oil & Oil Filter Change',supplier:'Owner (DIY planned)',notes:'5W-30 full synthetic + OEM Ford Racing filter',cost:'$150.00'}]};

// Helper functions
function showTab(tab){currentTab=tab;var tabs=document.querySelectorAll('.nav-tab');for(var i=0;i<tabs.length;i++){tabs[i].classList.remove('active')}var tabNames=['overview','vehicle','modifications','service','dyno','workorders','planned','graphs','technical','costs','media'];var tabIndex=tabNames.indexOf(tab);if(tabIndex>=0&&tabs[tabIndex]){tabs[tabIndex].classList.add('active')}render()}
function toggleCollapse(){photoCollapsed=!photoCollapsed;render()}
function toggleSection(section,subsection){if(sectionStates[section]&&sectionStates[section].hasOwnProperty(subsection)){sectionStates[section][subsection]=!sectionStates[section][subsection];render()}}
function toggleModSection(category){if(sectionStates.modifications.hasOwnProperty(category)){sectionStates.modifications[category]=!sectionStates.modifications[category];render()}}
function togglePlannedSection(category){if(sectionStates.planned.hasOwnProperty(category)){sectionStates.planned[category]=!sectionStates.planned[category];render()}}
function toggleTechnicalSection(category){if(sectionStates.technical.hasOwnProperty(category)){sectionStates.technical[category]=!sectionStates.technical[category];render()}}
function toggleWorkOrderSection(category){if(sectionStates.workorders.hasOwnProperty(category)){sectionStates.workorders[category]=!sectionStates.workorders[category];render()}}
function toggleWorkOrderItem(category,item){if(workOrderStates[category]&&workOrderStates[category].hasOwnProperty(item)){workOrderStates[category][item]=!workOrderStates[category][item];render()}}
function handlePhotoUpload(event){var file=event.target.files[0];if(file){var reader=new FileReader();reader.onload=function(e){currentCarImage=e.target.result;render()};reader.readAsDataURL(file)}}
function addNewServiceRecord(){editingServiceId=null;showServiceModal()}
function editServiceRecord(id){editingServiceId=id;showServiceModal()}
function deleteServiceRecord(id){if(confirm('Are you sure?')){buildData.serviceRecords=buildData.serviceRecords.filter(function(r){return r.id!==id});render()}}
function showServiceModal(){var modal=document.getElementById('service-modal');var form=document.getElementById('service-form');form.reset();if(editingServiceId){var record=buildData.serviceRecords.find(function(r){return r.id===editingServiceId});if(record){document.getElementById('service-date').value=record.date;document.getElementById('service-odometer').value=record.odometer;document.getElementById('service-service').value=record.service;document.getElementById('service-supplier').value=record.supplier;document.getElementById('service-notes').value=record.notes||'';document.getElementById('service-cost').value=record.cost}document.getElementById('modal-title').textContent='Edit Service Record'}else{document.getElementById('modal-title').textContent='Add New Service Record'}modal.classList.add('show')}
function closeServiceModal(){document.getElementById('service-modal').classList.remove('show');editingServiceId=null}
function saveServiceRecord(){var form=document.getElementById('service-form');var formData=new FormData(form);var record={date:formData.get('date'),odometer:formData.get('odometer'),service:formData.get('service'),supplier:formData.get('supplier'),notes:formData.get('notes'),cost:formData.get('cost')};if(editingServiceId){var index=buildData.serviceRecords.findIndex(function(r){return r.id===editingServiceId});if(index!==-1){buildData.serviceRecords[index]=Object.assign(record,{id:editingServiceId})}}else{var maxId=Math.max.apply(Math,buildData.serviceRecords.map(function(r){return r.id}));var newId=maxId+1;buildData.serviceRecords.push(Object.assign(record,{id:newId}))}closeServiceModal();render()}

// Main render function
function render(){var content=document.getElementById('content');if(!content)return;content.innerHTML='';var tabContent;switch(currentTab){case 'overview':tabContent=renderOverview();break;case 'vehicle':tabContent=renderVehicle();break;case 'modifications':tabContent=renderModifications();break;case 'service':tabContent=renderService();break;case 'dyno':tabContent=renderDyno();break;case 'workorders':tabContent=renderWorkOrders();break;case 'planned':tabContent=renderPlanned();break;case 'graphs':tabContent=renderGraphs();break;case 'technical':tabContent=renderTechnical();break;case 'costs':tabContent=renderCosts();break;case 'media':tabContent=renderMedia();break;default:tabContent=renderOverview()}if(tabContent){content.appendChild(tabContent)}}

function renderOverview(){var totalCost=0;for(var i=0;i<buildData.modifications.length;i++){var cost=parseFloat(buildData.modifications[i].cost.replace(/[$,]/g,''));totalCost+=isNaN(cost)?0:cost}var content=document.createElement('div');var photoCard=document.createElement('div');photoCard.className='card photo-container';var photoToggle=document.createElement('div');photoToggle.className='photo-toggle';photoToggle.onclick=toggleCollapse;photoToggle.innerHTML='<h2>üì∏ Build Photos</h2><span style="font-size:20px;color:var(--accent)">'+(photoCollapsed?'‚ñº':'‚ñ≤')+'</span>';var photoContent=document.createElement('div');photoContent.className='photo-content '+(photoCollapsed?'collapsed':'expanded');photoContent.style.maxHeight=photoCollapsed?'0':'500px';if(currentCarImage){var img=document.createElement('img');img.src=currentCarImage;img.className='car-image';img.alt='Mustang GT';photoContent.appendChild(img)}else{var uploadDiv=document.createElement('div');uploadDiv.className='photo-upload';uploadDiv.onclick=function(){document.getElementById('photo-input').click()};uploadDiv.innerHTML='<p>üì∑ Click to upload car photo</p><p style="font-size:14px;margin:8px 0 0 0">JPG, PNG, or GIF ‚Ä¢ Max 5MB</p>';photoContent.appendChild(uploadDiv)}var input=document.createElement('input');input.type='file';input.id='photo-input';input.accept='image/*';input.style.display='none';input.onchange=handlePhotoUpload;photoContent.appendChild(input);photoCard.appendChild(photoToggle);photoCard.appendChild(photoContent);content.appendChild(photoCard);var summaryCard=document.createElement('div');summaryCard.className='card';summaryCard.innerHTML='<h2>üìä Build Summary</h2>';var statsDiv=document.createElement('div');statsDiv.className='stats';statsDiv.innerHTML='<div class="stat"><div class="stat-value">473.2 kW</div><div class="stat-label">Current Power</div></div><div class="stat"><div class="stat-value">722 Nm</div><div class="stat-label">Current Torque</div></div><div class="stat"><div class="stat-value">590 kW</div><div class="stat-label">Target Power</div></div><div class="stat"><div class="stat-value">$'+totalCost.toLocaleString()+'</div><div class="stat-label">Total Investment</div></div>';summaryCard.appendChild(statsDiv);content.appendChild(summaryCard);var activityCard=document.createElement('div');activityCard.className='card';activityCard.innerHTML='<h2>üîÑ Recent Activity</h2>';var timelineDiv=document.createElement('div');timelineDiv.className='timeline';var recentMods=buildData.modifications.slice(-3).reverse();for(var i=0;i<recentMods.length;i++){var mod=recentMods[i];var item=document.createElement('div');item.className='timeline-item';item.innerHTML='<div class="timeline-date">'+mod.date+'</div><h3>'+mod.name+'</h3><p>'+mod.description+'</p><p style="font-weight:bold;color:var(--accent)">'+mod.cost+'</p>';timelineDiv.appendChild(item)}activityCard.appendChild(timelineDiv);content.appendChild(activityCard);return content}

function renderVehicle(){var content=document.createElement('div');var card=document.createElement('div');card.className='card';var html='<h2>üöó Vehicle Information</h2><div class="grid">';html+='<div class="card"><h3>Basic Details</h3><p><strong>VIN:</strong> '+buildData.vehicle.vin+'</p><p><strong>Model Year:</strong> '+buildData.vehicle.model+'</p><p><strong>Body Style:</strong> '+buildData.vehicle.body+'</p><p><strong>Paint Color:</strong> '+buildData.vehicle.paint+'</p><p><strong>Trim:</strong> '+buildData.vehicle.trim+'</p><p><strong>Build Date:</strong> '+buildData.vehicle.buildDate+'</p><p><strong>Delivery Date:</strong> '+buildData.vehicle.deliveryDate+'</p></div>';html+='<div class="card"><h3>Engine & Drivetrain</h3><p><strong>Engine:</strong> '+buildData.vehicle.engine+'</p><p><strong>Engine Number:</strong> '+buildData.vehicle.engineNumber+'</p><p><strong>Displacement:</strong> '+buildData.vehicle.displacement+'</p><p><strong>Compression:</strong> '+buildData.vehicle.compression+'</p><p><strong>Valvetrain:</strong> '+buildData.vehicle.valvetrain+'</p><p><strong>Transmission:</strong> '+buildData.vehicle.transmission+'</p><p><strong>Drive Type:</strong> '+buildData.vehicle.drive+'</p><p><strong>Axle Ratio:</strong> '+buildData.vehicle.axle+'</p><p><strong>Fuel Type:</strong> '+buildData.vehicle.fuel+'</p><p><strong>Fuel Capacity:</strong> '+buildData.vehicle.fuelCapacity+'</p></div>';html+='<div class="card"><h3>Performance & Specifications</h3><p><strong>Stock Power:</strong> '+buildData.vehicle.stockPower+'</p><p><strong>Stock Torque:</strong> '+buildData.vehicle.stockTorque+'</p><p style="color:var(--accent);font-weight:bold"><strong>Current Power:</strong> '+buildData.vehicle.currentPower+'</p><p style="color:var(--accent);font-weight:bold"><strong>Current Torque:</strong> '+buildData.vehicle.currentTorque+'</p><p><strong>Kerb Weight:</strong> '+buildData.vehicle.weight+'</p><p><strong>Power-to-Weight:</strong> '+buildData.vehicle.powerToWeight+'</p></div></div>';html+='<div class="grid" style="margin-top:20px"><div class="card"><h3>Dimensions</h3><p><strong>Length:</strong> '+buildData.vehicle.length+'</p><p><strong>Width:</strong> '+buildData.vehicle.width+'</p><p><strong>Height:</strong> '+buildData.vehicle.height+'</p><p><strong>Wheelbase:</strong> '+buildData.vehicle.wheelbase+'</p><p><strong>Track (Front):</strong> '+buildData.vehicle.trackFront+'</p><p><strong>Track (Rear):</strong> '+buildData.vehicle.trackRear+'</p></div>';html+='<div class="card"><h3>Wheels & Tyres</h3><p><strong>Front Wheels:</strong> '+buildData.vehicle.wheelsFront+'</p><p><strong>Rear Wheels:</strong> '+buildData.vehicle.wheelsRear+'</p><p><strong>Front Tyres:</strong> '+buildData.vehicle.tyresFront+'</p><p><strong>Rear Tyres:</strong> '+buildData.vehicle.tyresRear+'</p></div>';html+='<div class="card"><h3>Purchase Information</h3><p><strong>Dealer:</strong> '+buildData.vehicle.dealer+'</p><p><strong>Salesperson:</strong> '+buildData.vehicle.salesperson+'</p><p><strong>Original Price:</strong> '+buildData.vehicle.originalPrice+'</p></div></div>';html+='<div class="card" style="margin-top:20px"><h3>Factory Options & Equipment</h3><ul style="columns:2;column-gap:20px">';for(var i=0;i<buildData.vehicle.options.length;i++){html+='<li style="margin-bottom:8px">'+buildData.vehicle.options[i]+'</li>'}html+='</ul></div>';card.innerHTML=html;content.appendChild(card);return content}

function renderModifications(){var content=document.createElement('div');var card=document.createElement('div');card.className='card';card.innerHTML='<h2>üîß Major Modifications</h2>';var categories=[];for(var i=0;i<buildData.modifications.length;i++){var cat=buildData.modifications[i].category;if(categories.indexOf(cat)===-1){categories.push(cat)}}for(var i=0;i<categories.length;i++){var category=categories[i];var categoryKey=category.toLowerCase();var categoryMods=buildData.modifications.filter(function(mod){return mod.category===category});var isExpanded=sectionStates.modifications[categoryKey]||false;var categoryDiv=document.createElement('div');categoryDiv.className='planned-category';var categoryHeader=document.createElement('div');categoryHeader.className='collapsible';categoryHeader.onclick=function(cat){return function(){toggleModSection(cat)}}(categoryKey);categoryHeader.innerHTML='<h3>'+category+' ('+categoryMods.length+')</h3><span style="font-size:18px;color:var(--accent)">'+(isExpanded?'‚ñ≤':'‚ñº')+'</span>';var categoryContent=document.createElement('div');categoryContent.className='collapse-content '+(isExpanded?'expanded':'collapsed');var itemsHtml='';for(var j=0;j<categoryMods.length;j++){var mod=categoryMods[j];itemsHtml+='<div class="timeline-item"><div class="timeline-date">'+mod.date+'</div><h3>'+mod.name+'</h3><p>'+mod.description+'</p><p style="font-weight:bold;color:var(--accent)">'+mod.cost+'</p></div>'}categoryContent.innerHTML=itemsHtml;categoryDiv.appendChild(categoryHeader);categoryDiv.appendChild(categoryContent);card.appendChild(categoryDiv)}content.appendChild(card);return content}

function renderService(){var content=document.createElement('div');var totalSpent=0;for(var i=0;i<buildData.serviceRecords.length;i++){var cost=parseFloat(buildData.serviceRecords[i].cost.replace(/[$,]/g,''));totalSpent+=isNaN(cost)?0:cost}var plannedCosts=0;for(var i=0;i<buildData.plannedMods.length;i++){for(var j=0;j<buildData.plannedMods[i].items.length;j++){var costStr=buildData.plannedMods[i].items[j].cost.split(' - ')[0].replace(/[$,]/g,'');var cost=parseFloat(costStr);plannedCosts+=isNaN(cost)?0:cost}}var serviceCount=buildData.serviceRecords.length;var summaryCard=document.createElement('div');summaryCard.className='card';var statsDiv=document.createElement('div');statsDiv.className='stats';statsDiv.innerHTML='<div class="stat"><div class="stat-value">$'+totalSpent.toLocaleString()+'</div><div class="stat-label">Total Spent to Date</div></div><div class="stat"><div class="stat-value">$'+(plannedCosts*0.8).toLocaleString()+'-$'+(plannedCosts*1.2).toLocaleString()+'</div><div class="stat-label">Future Budget (Planned)</div></div><div class="stat"><div class="stat-value">'+serviceCount+'</div><div class="stat-label">Service Records</div></div>';summaryCard.appendChild(statsDiv);content.appendChild(summaryCard);var tableCard=document.createElement('div');tableCard.className='card';var headerDiv=document.createElement('div');headerDiv.innerHTML='<h2 style="margin:0;float:left">Master Chronological Timeline - Upgrades & Maintenance</h2>';var addBtn=document.createElement('button');addBtn.className='add-record-btn';addBtn.textContent='+ Add New Record';addBtn.onclick=addNewServiceRecord;headerDiv.appendChild(addBtn);headerDiv.style.overflow='hidden';tableCard.appendChild(headerDiv);var clearDiv=document.createElement('div');clearDiv.innerHTML='<div style="clear:both;margin-bottom:20px"></div>';tableCard.appendChild(clearDiv);var table=document.createElement('table');table.className='service-table';table.innerHTML='<thead><tr><th>Date</th><th>Odometer (km)</th><th>Service / Upgrade</th><th>Supplier / Workshop</th><th>Notes / Parts Used</th><th>Cost (AUD)</th><th>Actions</th></tr></thead>';var tbody=document.createElement('tbody');var sortedRecords=buildData.serviceRecords.slice().sort(function(a,b){return new Date(a.date)-new Date(b.date)});for(var i=0;i<sortedRecords.length;i++){var record=sortedRecords[i];var row=document.createElement('tr');row.innerHTML='<td>'+record.date+'</td><td>'+record.odometer+'</td><td>'+record.service+'</td><td>'+record.supplier+'</td><td>'+record.notes+'</td><td style="font-weight:bold;color:'+(record.cost==='Included'?'#10b981':'#4f46e5')+'">'+record.cost+'</td><td><button class="action-btn" onclick="editServiceRecord('+record.id+')">Edit</button><button class="action-btn delete" onclick="deleteServiceRecord('+record.id+')">‚úï</button></td>';tbody.appendChild(row)}table.appendChild(tbody);tableCard.appendChild(table);content.appendChild(tableCard);return content}

function renderDyno(){var content=document.createElement('div');var statsCard=document.createElement('div');statsCard.className='card';var statsDiv=document.createElement('div');statsDiv.className='stats';statsDiv.innerHTML='<div class="stat"><div class="stat-value">473.2 kW</div><div class="stat-label">Current Peak Power</div></div><div class="stat"><div class="stat-value">722 Nm</div><div class="stat-label">Current Peak Torque</div></div><div class="stat"><div class="stat-value">~580-600 kW</div><div class="stat-label">Target Power Goal</div></div>';statsCard.appendChild(statsDiv);content.appendChild(statsCard);var dynoCard=document.createElement('div');dynoCard.className='card';var dynoHeader=document.createElement('div');dynoHeader.className='collapsible';dynoHeader.onclick=function(){toggleSection('dyno','results')};var isResultsExpanded=sectionStates.dyno.results;dynoHeader.innerHTML='<h2>üìà Dyno Results</h2><span style="font-size:18px;color:var(--accent)">'+(isResultsExpanded?'‚ñ≤':'‚ñº')+'</span>';dynoCard.appendChild(dynoHeader);var dynoContent=document.createElement('div');dynoContent.className='collapse-content '+(isResultsExpanded?'expanded':'collapsed');for(var i=0;i<buildData.dynoResults.length;i++){var dyno=buildData.dynoResults[i];var dynoDiv=document.createElement('div');dynoDiv.className='planned-category';var dynoH=document.createElement('div');dynoH.className='collapsible';var sessionKey='session'+(i+1);dynoH.onclick=function(key){return function(){toggleSection('dyno',key)}}(sessionKey);var isSessionExpanded=sectionStates.dyno[sessionKey];dynoH.innerHTML='<h3 style="color:#4f46e5">'+dyno.date+' - '+dyno.shop+'</h3><span style="font-size:18px;color:var(--accent)">'+(isSessionExpanded?'‚ñ≤':'‚ñº')+'</span>';var dynoC=document.createElement('div');dynoC.className='collapse-content '+(isSessionExpanded?'expanded':'collapsed');dynoC.innerHTML='<ul style="margin:10px 0;padding-left:20px"><li><strong>Test ID:</strong> '+dyno.testId+' ‚Ä¢ <strong>Operator:</strong> '+dyno.operator+' ‚Ä¢ <strong>Odometer:</strong> '+dyno.odometer+'</li><li><strong>Setup / Mods:</strong> '+dyno.setup+'</li><li><strong>Fuel:</strong> '+dyno.fuel+' ‚Ä¢ <strong>Correction:</strong> '+dyno.correction+' ‚Ä¢ <strong>Gear:</strong> '+dyno.gear+'</li><li style="color:#4f46e5;font-weight:bold"><strong>Peak Power:</strong> '+dyno.power+' ‚Ä¢ <strong>Peak Torque:</strong> '+dyno.torque+'</li><li><strong>Notes:</strong> '+dyno.notes+'</li></ul><div style="border:2px dashed var(--border);border-radius:8px;padding:20px;text-align:center;color:var(--muted);margin:10px 0;cursor:pointer"><span style="margin-right:8px">üìä</span>Click to add dyno graphs & tune results<br><small>Support multiple images: dyno charts, AFR graphs, boost logs, etc.</small></div>';dynoDiv.appendChild(dynoH);dynoDiv.appendChild(dynoC);dynoContent.appendChild(dynoDiv)}dynoCard.appendChild(dynoContent);content.appendChild(dynoCard);var goalsCard=document.createElement('div');goalsCard.className='card';var goalsHeader=document.createElement('div');goalsHeader.className='collapsible';goalsHeader.onclick=function(){toggleSection('dyno','goals')};var isGoalsExpanded=sectionStates.dyno.goals;goalsHeader.innerHTML='<h2>üéØ Projected Dyno Goals (Estimated)</h2><span style="font-size:18px;color:var(--accent)">'+(isGoalsExpanded?'‚ñ≤':'‚ñº')+'</span>';var goalsContent=document.createElement('div');goalsContent.className='collapse-content '+(isGoalsExpanded?'expanded':'collapsed');goalsContent.innerHTML='<table><thead><tr><th>Stage / Setup</th><th>Estimated Power (kW)</th><th>Estimated Torque (Nm)</th><th>Notes</th></tr></thead><tbody><tr><td>Current (Headers + Tune)</td><td>470 kW</td><td>720 Nm</td><td>Confirmed on 31-Jul-2020 dyno</td></tr><tr><td>Fuel System + Injectors (ID1050X/ FIC 1200cc)</td><td>~480-500 kW</td><td>~740 Nm</td><td>Stable fueling headroom</td></tr><tr><td>Pulley Swap (3.5" @ ~13 psi)</td><td>~520-540 kW</td><td>~780-800 Nm</td><td>Requires retune & injectors</td></tr><tr><td>Throttle Body Upgrade (132mm)</td><td>+15-25 kW</td><td>+20-30 Nm</td><td>Increases airflow capacity</td></tr><tr><td>Cams + Valvetrain (Stage 2 Blower)</td><td>~560-580 kW</td><td>~820-850 Nm</td><td>Higher RPM breathing</td></tr><tr><td>Cooling Upgrade (heat exchanger)</td><td>Power held consistent</td><td>Torque stable</td><td>Maintains safe temps, prevents heat soak</td></tr><tr style="background:#f0f9ff"><td><strong>Full Package (Injectors + Pulley + TB + Cams)</strong></td><td><strong>580-600+ kW</strong></td><td><strong>850+ Nm</strong></td><td><strong>Target setup on 98 RON pump fuel</strong></td></tr></tbody></table>';goalsCard.appendChild(goalsHeader);goalsCard.appendChild(goalsContent);content.appendChild(goalsCard);var targetCard=document.createElement('div');targetCard.className='card';var targetHeader=document.createElement('div');targetHeader.className='collapsible';targetHeader.onclick=function(){toggleSection('dyno','target')};var isTargetExpanded=sectionStates.dyno.target;targetHeader.innerHTML='<h2>üéØ Target Dyno Goal</h2><span style="font-size:18px;color:var(--accent)">'+(isTargetExpanded?'‚ñ≤':'‚ñº')+'</span>';var targetContent=document.createElement('div');targetContent.className='collapse-content '+(isTargetExpanded?'expanded':'collapsed');targetContent.innerHTML='<ul style="padding-left:20px"><li><strong>Power:</strong> ~580-600 kW</li><li><strong>Torque:</strong> ~850+ Nm</li><li><strong>Setup Assumed:</strong> Injectors + Fuel Module + 3.5" Pulley + 132mm TB + Cams + Cooling</li><li><strong>Fuel:</strong> Pump 98 RON (with option to push higher on E85)</li></ul>';targetCard.appendChild(targetHeader);targetCard.appendChild(targetContent);content.appendChild(targetCard);var templateCard=document.createElement('div');templateCard.className='card';var templateHeader=document.createElement('div');templateHeader.className='collapsible';templateHeader.onclick=function(){toggleSection('dyno','template')};var isTemplateExpanded=sectionStates.dyno.template;templateHeader.innerHTML='<h2>üìã Future Dyno Template</h2><span style="font-size:18px;color:var(--accent)">'+(isTemplateExpanded?'‚ñ≤':'‚ñº')+'</span>';var templateContent=document.createElement('div');templateContent.className='collapse-content '+(isTemplateExpanded?'expanded':'collapsed');templateContent.innerHTML='<div class="grid" style="grid-template-columns:1fr 1fr;gap:20px;margin:20px 0"><div><div class="form-group"><label>Date:</label><input type="date" style="width:100%"></div><div class="form-group"><label>Test ID:</label><input type="text" placeholder="e.g. 4608.2" style="width:100%"></div><div class="form-group"><label>Setup / Mods:</label><textarea placeholder="e.g. Whipple Gen 5 3.0L SC + KOOKS headers + ID1050X injectors + 3.5" pulley" style="width:100%;min-height:80px;resize:vertical"></textarea></div><div class="form-group"><label>Fuel:</label><input type="text" placeholder="e.g. Shell V-Power 98 RON" style="width:100%"></div><div class="form-group"><label>Peak Power (kW):</label><div style="display:flex;gap:10px"><input type="number" placeholder="580" style="flex:1"><span style="align-self:center">@</span><input type="number" placeholder="7200" style="flex:1"><span style="align-self:center">RPM</span></div></div></div><div><div class="form-group"><label>Shop / Dyno:</label><input type="text" placeholder="e.g. Herrod Performance" style="width:100%"></div><div class="form-group"><label>Operator:</label><input type="text" placeholder="e.g. Rob Herrod" style="width:100%"><label style="margin-top:10px">Odometer:</label><input type="text" placeholder="e.g. 120,000 km" style="width:100%"></div><div class="form-group"><label>Correction:</label><input type="text" placeholder="e.g. 4.43 SAE J607 (19.5¬∞C, 959 mBar, 74% RH)" style="width:100%"></div><div class="form-group"><label>Gear Used:</label><select style="width:100%"><option>Select gear</option><option>3rd</option><option>4th</option><option>5th</option></select></div><div class="form-group"><label>Peak Torque (Nm):</label><div style="display:flex;gap:10px"><input type="number" placeholder="850" style="flex:1"><span style="align-self:center">@</span><input type="number" placeholder="5500" style="flex:1"><span style="align-self:center">RPM</span></div></div></div></div><div class="form-group"><label>Notes:</label><textarea placeholder="e.g. Excellent power delivery, smooth torque curve, no knock detected" style="width:100%;min-height:60px;resize:vertical"></textarea></div><div style="text-align:center;margin:20px 0"><button class="btn primary">Save Dyno Record</button></div>';templateCard.appendChild(templateHeader);templateCard.appendChild(templateContent);content.appendChild(templateCard);return content}

function renderWorkOrders(){var content=document.createElement('div');var totalItems=0;var completedItems=0;for(var i=0;i<buildData.plannedMods.length;i++){totalItems+=buildData.plannedMods[i].items.length;for(var j=0;j<buildData.plannedMods[i].items.length;j++){var categoryKey=buildData.plannedMods[i].category.includes('Fueling')?'fueling':'wheels';var itemKey=j===0?(categoryKey==='fueling'?'aem':'tyres'):j===1?(categoryKey==='fueling'?'kpm':'alignment'):'injectors';if(workOrderStates[categoryKey]&&workOrderStates[categoryKey][itemKey]){completedItems++}}}var pendingItems=totalItems-completedItems;var progressPercent=totalItems>0?Math.round((completedItems/totalItems)*100):0;var summaryCard=document.createElement('div');summaryCard.className='card';summaryCard.innerHTML='<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><div><h1 style="margin:0;font-size:24px;color:var(--ink)">'+pendingItems+'</h1><p style="margin:0;color:var(--muted)">Pending Work Items</p></div><div style="text-align:center"><p style="margin:0;color:var(--muted);font-size:14px">Ready to Move</p></div><div style="text-align:right"><h1 style="margin:0;font-size:28px;color:var(--accent)">'+progressPercent+'%</h1><p style="margin:0;color:var(--muted);font-size:14px">Progress</p></div></div>';content.appendChild(summaryCard);var fuelingCard=document.createElement('div');fuelingCard.className='card';var fuelingCompleted=0;var fuelingTotal=3;if(workOrderStates.fueling.aem)fuelingCompleted++;if(workOrderStates.fueling.kpm)fuelingCompleted++;if(workOrderStates.fueling.injectors)fuelingCompleted++;var isFuelingExpanded=sectionStates.workorders.fueling;var fuelingHeader=document.createElement('div');fuelingHeader.className='collapsible';fuelingHeader.onclick=function(){toggleWorkOrderSection('fueling')};fuelingHeader.innerHTML='<div style="display:flex;justify-content:space-between;align-items:center;width:100%"><h2 style="margin:0">Fueling & Monitoring (foundation first)</h2><div style="display:flex;align-items:center;gap:20px"><span style="color:var(--muted);font-size:14px">'+fuelingCompleted+'/'+fuelingTotal+' completed</span><span style="color:var(--muted);font-size:14px">Target: 2025-09</span><span style="font-size:18px;color:var(--accent)">'+(isFuelingExpanded?'‚ñ≤':'‚ñº')+'</span></div></div>';var fuelingContent=document.createElement('div');fuelingContent.className='collapse-content '+(isFuelingExpanded?'expanded':'collapsed');var aemItem=document.createElement('div');aemItem.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:15px;margin:10px 0;background:#fff;border:1px solid var(--border);border-radius:8px';aemItem.innerHTML='<div style="display:flex;align-items:center;gap:12px"><input type="checkbox" '+(workOrderStates.fueling.aem?'checked':'')+' onchange="toggleWorkOrderItem(\'fueling\',\'aem\')" style="transform:scale(1.2)"><div><h4 style="margin:0 0 4px 0">AEM X-Series Wideband UEGO + Vent Pod</h4><p style="margin:0;color:var(--muted);font-size:14px">Estimated Cost: $500.00 - $600.00</p></div></div><div style="text-align:right"><span style="background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold">üìã PENDING</span><p style="margin:4px 0 0 0;color:var(--muted);font-size:12px">Check when complete</p></div>';var kpmItem=document.createElement('div');kpmItem.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:15px;margin:10px 0;background:#fff;border:1px solid var(--border);border-radius:8px';kpmItem.innerHTML='<div style="display:flex;align-items:center;gap:12px"><input type="checkbox" '+(workOrderStates.fueling.kpm?'checked':'')+' onchange="toggleWorkOrderItem(\'fueling\',\'kpm\')" style="transform:scale(1.2)"><div><h4 style="margin:0 0 4px 0">KPM Mustang GT 1500 hp in-tank fuel module</h4><p style="margin:0;color:var(--muted);font-size:14px">Estimated Cost: $2,550.00</p></div></div><div style="text-align:right"><span style="background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold">üìã PENDING</span><p style="margin:4px 0 0 0;color:var(--muted);font-size:12px">Check when complete</p></div>';var injectorItem=document.createElement('div');injectorItem.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:15px;margin:10px 0;background:#fff;border:1px solid var(--border);border-radius:8px';injectorItem.innerHTML='<div style="display:flex;align-items:center;gap:12px"><input type="checkbox" '+(workOrderStates.fueling.injectors?'checked':'')+' onchange="toggleWorkOrderItem(\'fueling\',\'injectors\')" style="transform:scale(1.2)"><div><h4 style="margin:0 0 4px 0">Injector upgrade (ID1050X or FIC 1200cc)</h4><p style="margin:0;color:var(--muted);font-size:14px">Estimated Cost: $1,800.00 - $2,200.00</p></div></div><div style="text-align:right"><span style="background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold">üìã PENDING</span><p style="margin:4px 0 0 0;color:var(--muted);font-size:12px">Check when complete</p></div>';fuelingContent.appendChild(aemItem);fuelingContent.appendChild(kpmItem);fuelingContent.appendChild(injectorItem);fuelingCard.appendChild(fuelingHeader);fuelingCard.appendChild(fuelingContent);content.appendChild(fuelingCard);var wheelsCard=document.createElement('div');wheelsCard.className='card';var wheelsCompleted=0;var wheelsTotal=2;if(workOrderStates.wheels.tyres)wheelsCompleted++;if(workOrderStates.wheels.alignment)wheelsCompleted++;var isWheelsExpanded=sectionStates.workorders.wheels;var wheelsHeader=document.createElement('div');wheelsHeader.className='collapsible';wheelsHeader.onclick=function(){toggleWorkOrderSection('wheels')};wheelsHeader.innerHTML='<div style="display:flex;justify-content:space-between;align-items:center;width:100%"><h2 style="margin:0">Wheels, Tyres & Suspension Works</h2><div style="display:flex;align-items:center;gap:20px"><span style="color:var(--muted);font-size:14px">'+wheelsCompleted+'/'+wheelsTotal+' completed</span><span style="color:var(--muted);font-size:14px">Target: 2025-10</span><span style="font-size:18px;color:var(--accent)">'+(isWheelsExpanded?'‚ñ≤':'‚ñº')+'</span></div></div>';var wheelsContent=document.createElement('div');wheelsContent.className='collapse-content '+(isWheelsExpanded?'expanded':'collapsed');var tyreItem=document.createElement('div');tyreItem.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:15px;margin:10px 0;background:#fff;border:1px solid var(--border);border-radius:8px';tyreItem.innerHTML='<div style="display:flex;align-items:center;gap:12px"><input type="checkbox" '+(workOrderStates.wheels.tyres?'checked':'')+' onchange="toggleWorkOrderItem(\'wheels\',\'tyres\')" style="transform:scale(1.2)"><div><h4 style="margin:0 0 4px 0">Tyre Replacement - Michelin Pilot Sport S (275/35 ZR20 front, 305/30 ZR20 rear)</h4><p style="margin:0;color:var(--muted);font-size:14px">Estimated Cost: $1,200.00 - $1,500.00</p></div></div><div style="text-align:right"><span style="background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold">üìã PENDING</span><p style="margin:4px 0 0 0;color:var(--muted);font-size:12px">Check when complete</p></div>';var alignmentItem=document.createElement('div');alignmentItem.style.cssText='display:flex;justify-content:space-between;align-items:center;padding:15px;margin:10px 0;background:#fff;border:1px solid var(--border);border-radius:8px';alignmentItem.innerHTML='<div style="display:flex;align-items:center;gap:12px"><input type="checkbox" '+(workOrderStates.wheels.alignment?'checked':'')+' onchange="toggleWorkOrderItem(\'wheels\',\'alignment\')" style="transform:scale(1.2)"><div><h4 style="margin:0 0 4px 0">Wheel Alignment (Fulcrum Suspensions)</h4><p style="margin:0;color:var(--muted);font-size:14px">Estimated Cost: $200.00 - $300.00</p></div></div><div style="text-align:right"><span style="background:#fff3cd;color:#856404;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold">üìã PENDING</span><p style="margin:4px 0 0 0;color:var(--muted);font-size:12px">Check when complete</p></div>';wheelsContent.appendChild(tyreItem);wheelsContent.appendChild(alignmentItem);wheelsCard.appendChild(wheelsHeader);wheelsCard.appendChild(wheelsContent);content.appendChild(wheelsCard);return content}

function renderPlanned(){var content=document.createElement('div');var card=document.createElement('div');card.className='card';card.innerHTML='<h2>üéØ Planned Modifications</h2>';for(var i=0;i<buildData.plannedMods.length;i++){var category=buildData.plannedMods[i];var categoryKey=category.category.split(':')[0].toLowerCase().replace(' ','');var isExpanded=sectionStates.planned[categoryKey]||false;var categoryDiv=document.createElement('div');categoryDiv.className='planned-category';var categoryHeader=document.createElement('div');categoryHeader.className='collapsible';categoryHeader.onclick=function(key){return function(){togglePlannedSection(key)}}(categoryKey);categoryHeader.innerHTML='<h3>'+category.category+'</h3><span style="font-size:18px;color:var(--accent)">'+(isExpanded?'‚ñ≤':'‚ñº')+'</span>';var categoryContent=document.createElement('div');categoryContent.className='collapse-content '+(isExpanded?'expanded':'collapsed');var itemsHtml='';for(var j=0;j<category.items.length;j++){var item=category.items[j];itemsHtml+='<div class="planned-item"><h4>'+item.name+'</h4><p>'+item.description+'</p><p class="planned-cost">Estimated Cost: '+item.cost+'</p></div>'}categoryContent.innerHTML=itemsHtml;categoryDiv.appendChild(categoryHeader);categoryDiv.appendChild(categoryContent);card.appendChild(categoryDiv)}content.appendChild(card);return content}

function renderGraphs(){var content=document.createElement('div');var powerCard=document.createElement('div');powerCard.className='card';powerCard.innerHTML='<h2>üìà Power Progression Timeline</h2>';var powerChartContainer=document.createElement('div');powerChartContainer.style.cssText='background:#fff;border-radius:8px;padding:20px;margin:20px 0;height:400px;position:relative';var powerCanvas=document.createElement('canvas');powerCanvas.id='powerChart';powerCanvas.style.cssText='width:100%;height:100%';powerChartContainer.appendChild(powerCanvas);powerCard.appendChild(powerChartContainer);content.appendChild(powerCard);var costCard=document.createElement('div');costCard.className='card';costCard.innerHTML='<h2>üí∞ Investment Timeline</h2>';var costChartContainer=document.createElement('div');costChartContainer.style.cssText='background:#fff;border-radius:8px;padding:20px;margin:20px 0;height:400px;position:relative';var costCanvas=document.createElement('canvas');costCanvas.id='costChart';costCanvas.style.cssText='width:100%;height:100%';costChartContainer.appendChild(costCanvas);costCard.appendChild(costChartContainer);content.appendChild(costCard);var spendingCard=document.createElement('div');spendingCard.className='card';spendingCard.innerHTML='<h2>üìä Spending Breakdown by Category</h2>';var spendingChartContainer=document.createElement('div');spendingChartContainer.style.cssText='background:#fff;border-radius:8px;padding:20px;margin:20px 0;height:400px;position:relative';var spendingCanvas=document.createElement('canvas');spendingCanvas.id='spendingChart';spendingCanvas.style.cssText='width:100%;height:100%';spendingChartContainer.appendChild(spendingCanvas);spendingCard.appendChild(spendingChartContainer);content.appendChild(spendingCard);setTimeout(function(){if(typeof Chart!=='undefined'){createPowerChart();createCostChart();createSpendingChart()}},100);return content}

function createPowerChart(){var ctx=document.getElementById('powerChart');if(!ctx||typeof Chart==='undefined')return;try{new Chart(ctx,{type:'line',data:{labels:['Stock','Apr 2020 (SC Install)','Jul 2020 (Headers)','Target Goal'],datasets:[{label:'Power (kW)',data:[339,441.2,473.2,590],borderColor:'#4f46e5',backgroundColor:'rgba(79,70,229,0.1)',tension:0.3,fill:true},{label:'Torque (Nm)',data:[556,666,722,850],borderColor:'#10b981',backgroundColor:'rgba(16,185,129,0.1)',tension:0.3,fill:true,yAxisID:'y1'}]},options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:'Power & Torque Progression'},legend:{position:'top'}},scales:{y:{type:'linear',display:true,position:'left',title:{display:true,text:'Power (kW)'}},y1:{type:'linear',display:true,position:'right',title:{display:true,text:'Torque (Nm)'},grid:{drawOnChartArea:false}}}}})}catch(e){console.log('Chart error:',e)}}

function createCostChart(){var ctx=document.getElementById('costChart');if(!ctx||typeof Chart==='undefined')return;try{var yearlyData=[{year:'2018',amount:57764},{year:'2020',amount:37555},{year:'2021',amount:1900},{year:'2022',amount:25336},{year:'2025',amount:910}];var cumulativeData=[];var runningTotal=0;for(var i=0;i<yearlyData.length;i++){runningTotal+=yearlyData[i].amount;cumulativeData.push(runningTotal)}new Chart(ctx,{type:'bar',data:{labels:yearlyData.map(function(item){return item.year}),datasets:[{label:'Annual Investment',data:yearlyData.map(function(item){return item.amount}),backgroundColor:['rgba(79,70,229,0.8)','rgba(16,185,129,0.8)','rgba(245,158,11,0.8)','rgba(239,68,68,0.8)','rgba(139,69,19,0.8)'],borderColor:['#4f46e5','#10b981','#f59e0b','#ef4444','#8b4513'],borderWidth:1},{label:'Cumulative Total',data:cumulativeData,type:'line',borderColor:'#1f2937',backgroundColor:'rgba(31,41,55,0.1)',yAxisID:'y1'}]},options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:'Investment Timeline - Annual & Cumulative'},legend:{position:'top'}},scales:{y:{beginAtZero:true,title:{display:true,text:'Annual Investment (AUD)'},ticks:{callback:function(value){return '$'+value.toLocaleString()}}},y1:{type:'linear',display:true,position:'right',title:{display:true,text:'Cumulative Total (AUD)'},grid:{drawOnChartArea:false},ticks:{callback:function(value){return '$'+value.toLocaleString()}}}}}})}catch(e){console.log('Chart error:',e)}}

function createSpendingChart(){var ctx=document.getElementById('spendingChart');if(!ctx||typeof Chart==='undefined')return;try{var categories=[{name:'Vehicle Purchase',amount:57764,color:'#4f46e5'},{name:'Supercharger System',amount:30955,color:'#10b981'},{name:'Engine Rebuild',amount:24536,color:'#f59e0b'},{name:'Headers & Exhaust',amount:6000,color:'#ef4444'},{name:'Service & Maintenance',amount:3900,color:'#8b5cf6'},{name:'Electronics/Tuning',amount:760,color:'#06b6d4'}];new Chart(ctx,{type:'doughnut',data:{labels:categories.map(function(cat){return cat.name}),datasets:[{data:categories.map(function(cat){return cat.amount}),backgroundColor:categories.map(function(cat){return cat.color}),borderColor:categories.map(function(cat){return cat.color}),borderWidth:2}]},options:{responsive:true,maintainAspectRatio:false,plugins:{title:{display:true,text:'Total Investment by Category'},legend:{position:'right'},tooltip:{callbacks:{label:function(context){var label=context.label||'';var value=context.parsed;var total=context.dataset.data.reduce(function(a,b){return a+b},0);var percentage=((value/total)*100).toFixed(1);return label+': $'+value.toLocaleString()+' ('+percentage+'%)'}}}}}}) }catch(e){console.log('Chart error:',e)}}

function renderTechnical(){var content=document.createElement('div');var card=document.createElement('div');card.className='card';card.innerHTML='<h2>üìö Technical Notes</h2>';var pulleyDiv=document.createElement('div');pulleyDiv.style.marginBottom='20px';var pulleyHeader=document.createElement('div');pulleyHeader.className='collapsible';pulleyHeader.onclick=function(){toggleTechnicalSection('pulley')};var isPulleyExpanded=sectionStates.technical.pulley;pulleyHeader.innerHTML='<h3>Pulley Sizing & Boost Calculation</h3><span style="font-size:18px;color:var(--accent)">'+(isPulleyExpanded?'‚ñ≤':'‚ñº')+'</span>';var pulleyContent=document.createElement('div');pulleyContent.className='collapse-content '+(isPulleyExpanded?'expanded':'collapsed');pulleyContent.innerHTML='<p><strong>Current Setup:</strong></p><ul><li>Stock pulley: ~2.75" (8-9 psi boost)</li><li>3.5" pulley target: ~13-15 psi boost</li></ul><p><strong>Common Pulley Sizes & Boost Levels:</strong></p><ul><li>3.875": 8-9 psi (stock+)</li><li>3.625": 10-11 psi (mild)</li><li>3.500": 12-13 psi (moderate)</li><li>3.375": 14-15 psi (aggressive)</li></ul>';pulleyDiv.appendChild(pulleyHeader);pulleyDiv.appendChild(pulleyContent);card.appendChild(pulleyDiv);var injectorDiv=document.createElement('div');injectorDiv.style.marginBottom='20px';var injectorHeader=document.createElement('div');injectorHeader.className='collapsible';injectorHeader.onclick=function(){toggleTechnicalSection('injector')};var isInjectorExpanded=sectionStates.technical.injector;injectorHeader.innerHTML='<h3>Injector Sizing Quick Reference</h3><span style="font-size:18px;color:var(--accent)">'+(isInjectorExpanded?'‚ñ≤':'‚ñº')+'</span>';var injectorContent=document.createElement('div');injectorContent.className='collapse-content '+(isInjectorExpanded?'expanded':'collapsed');injectorContent.innerHTML='<table><thead><tr><th>Injector Size</th><th>HP @ 85% Duty</th><th>Notes</th></tr></thead><tbody><tr><td>ID1050X (1000cc)</td><td>~590 HP</td><td>Pump gas friendly</td></tr><tr><td>FIC 1200cc</td><td>~710 HP</td><td>High flow option</td></tr><tr><td>ID1300X</td><td>~770 HP</td><td>E85 capable</td></tr></tbody></table>';injectorDiv.appendChild(injectorHeader);injectorDiv.appendChild(injectorContent);card.appendChild(injectorDiv);content.appendChild(card);return content}

function renderCosts(){var content=document.createElement('div');var totalModifications=0;for(var i=0;i<buildData.modifications.length;i++){var cost=parseFloat(buildData.modifications[i].cost.replace(/[$,]/g,''));totalModifications+=isNaN(cost)?0:cost}var totalService=0;for(var i=0;i<buildData.serviceRecords.length;i++){var cost=parseFloat(buildData.serviceRecords[i].cost.replace(/[$,]/g,''));totalService+=isNaN(cost)?0:cost}var originalPrice=parseFloat(buildData.vehicle.originalPrice.replace(/[$,]/g,''));var totalInvestment=originalPrice+totalModifications+totalService;var summaryCard=document.createElement('div');summaryCard.className='card';summaryCard.innerHTML='<h2>üí∞ Investment Summary</h2>';var statsDiv=document.createElement('div');statsDiv.className='stats';statsDiv.innerHTML='<div class="stat"><div class="stat-value">$'+originalPrice.toLocaleString()+'</div><div class="stat-label">Vehicle Purchase</div></div><div class="stat"><div class="stat-value">$'+totalModifications.toLocaleString()+'</div><div class="stat-label">Major Modifications</div></div><div class="stat"><div class="stat-value">$'+totalService.toLocaleString()+'</div><div class="stat-label">Service & Maintenance</div></div><div class="stat"><div class="stat-value">$'+totalInvestment.toLocaleString()+'</div><div class="stat-label">Total Investment</div></div>';summaryCard.appendChild(statsDiv);content.appendChild(summaryCard);var breakdownCard=document.createElement('div');breakdownCard.className='card';breakdownCard.innerHTML='<h2>üìä Cost Breakdown by Year</h2><div style="color:var(--muted);text-align:center;padding:40px">Detailed cost analysis and charts will be displayed here.<br>Track spending patterns and ROI over time.</div>';content.appendChild(breakdownCard);return content}

function renderMedia(){var content=document.createElement('div');var card=document.createElement('div');card.className='card';card.innerHTML='<h2>üì± Media & Documentation</h2><div class="photo-upload" style="margin:20px 0"><p>üìÅ Click to upload build photos, dyno sheets, receipts</p><p style="font-size:14px;margin:8px 0 0 0">Multiple files supported ‚Ä¢ JPG, PNG, PDF</p></div><h2>üìù Build Notes</h2><textarea placeholder="Add your build notes, lessons learned, future plans..." style="width:100%;min-height:200px;resize:vertical;padding:12px;border:1px solid var(--border);border-radius:8px"></textarea>';content.appendChild(card);return content}

document.addEventListener('DOMContentLoaded',function(){window.showTab=showTab;window.toggleCollapse=toggleCollapse;window.toggleSection=toggleSection;window.toggleModSection=toggleModSection;window.togglePlannedSection=togglePlannedSection;window.toggleTechnicalSection=toggleTechnicalSection;window.toggleWorkOrderSection=toggleWorkOrderSection;window.toggleWorkOrderItem=toggleWorkOrderItem;window.handlePhotoUpload=handlePhotoUpload;window.addNewServiceRecord=addNewServiceRecord;window.editServiceRecord=editServiceRecord;window.deleteServiceRecord=deleteServiceRecord;window.closeServiceModal=closeServiceModal;window.saveServiceRecord=saveServiceRecord;render()});
</script>
</body>
</html>